<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fantasy Map Explorer</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="login-panel" id="loginPanel">
    <h2 id="loginPanelTitle">🗡️ Enter the Realm 🗡️</h2>
    <input type="email" id="emailInput" placeholder="Enter your email" class="styled-input" />
    <input type="password" id="passwordInput" placeholder="Password" class="styled-input" />

    <div id="registrationFields" style="display: none;">
      <input type="text" id="usernameInput" placeholder="Character Name (for new registration)" maxlength="20" class="styled-input" />
      <input type="password" id="confirmPasswordInput" placeholder="Confirm your password" class="styled-input" />
      <label for="spawnLocationInput" id="spawnLocationLabel">Choose Starting Area:</label>
      <input type="text" id="spawnLocationInput" placeholder="e.g., forest, mountains" class="styled-input" />
    </div>

    <div id="loginSpecificFields">
      <label><input type="checkbox" id="rememberMeCheckbox" /> Remember me</label>
      <a href="#" id="forgotPasswordLink">Forgot Password?</a>
    </div>

    <div id="authError" class="error-msg"></div>

    <button class="login-btn" id="loginButton">Login</button>
    <button class="login-btn" id="switchToRegisterButton">New Adventurer? Register</button>
    <button class="login-btn" id="completeRegisterButton" style="display: none;">Complete Registration</button>
    <button class="login-btn" id="backToLoginButton" style="display: none;">Back to Login</button>
  </div>

  <div class="game-container" id="gameContainer" style="display: none;">
    <div id="map"></div>

    <div class="ui-panel unified-ui-panel">
      <div class="tab-bar">
        <button class="tab-button" data-tab="character">⚔️</button>
        <button class="tab-button" data-tab="inventory">🎒</button>
        <button class="tab-button" data-tab="pets">🐾</button>
        <button class="tab-button" data-tab="eventLog">📜</button>
        <button class="tab-button" data-tab="instructions">🗺️</button>
        <button class="tab-button" data-tab="distance">📏</button>
        <button class="tab-button" onclick="window.logoutCharacter()">🚪</button>
      </div>

      <div id="characterTabContent" class="tab-content">
        <div class="character-name" id="characterName">Adventurer</div>
        <div class="stat-row"><span class="stat-label">🏃 Speed:</span><span class="stat-value" id="speedStat">10</span></div>
        <div class="stat-row"><span class="stat-label">⚔️ Combat:</span><span class="stat-value" id="combatStat">10</span></div>
        <div class="stat-row"><span class="stat-label">🧙 Magic:</span><span class="stat-value" id="magicStat">10</span></div>
        <div class="stat-row"><span class="stat-label">🍀 Luck:</span><span class="stat-value" id="luckStat">10</span></div>
        <div class="stat-row"><span class="stat-label">💪 Strength:</span><span class="stat-value" id="strengthStat">0</span></div>
        <div class="stat-row"><span class="stat-label">💰 Gold:</span><span class="stat-value" id="goldStat">50</span></div>
        <div class="stat-row"><span class="stat-label">❤️ Health:</span><span class="stat-value"><span id="healthStat">100</span> / <span id="maxHealthStat">100</span></span></div>
      </div>

      <div id="inventoryTabContent" class="tab-content">
        <div id="inventoryContent">No items yet.</div>
      </div>

      <div id="eventLogTabContent" class="tab-content">
        <div id="eventLogContent">
          <div class="event-entry">Welcome to the mystical realm! Click on the map to begin your journey.</div>
        </div>
      </div>

      <div id="instructionsTabContent" class="tab-content">
        <p>Click anywhere on the map to set your destination. Your character will travel there, encountering various events along the way!</p>
      </div>

      <div id="distanceTabContent" class="tab-content">
        <div id="currentJourneyDistanceDisplay">Current Journey: 0 m / 0 m</div>
        <div id="lifetimeDistanceDisplay">Lifetime Distance: 0 m</div>
      </div>

      <div id="petsTabContent" class="tab-content"></div>
    </div>
  </div>

  <div class="event-modal" id="eventModal">
    <div class="event-content">
      <div class="event-title" id="eventTitle">Random Encounter</div>
      <div class="event-description" id="eventDescription">Something interesting happens...</div>
      <div class="event-choices" id="eventChoices"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>
